import seaborn as sns
import matplotlib.pyplot as plt
import pandas as pd

data1 = [{1: 0.655, 0: 0.293, 3: 0.0517, 2: 0}, {1: 0.362, 2: 0.275, 0: 0.258, 3: 0.103}, {2: 0.431, 3: 0.3103448275862069, 0: 0.1896551724137931, 1: 0.06896551724137931}, {2: 0.29310344827586204, 3: 0.29310344827586204, 1: 0.20689655172413793, 0: 0.20689655172413793}, {2: 0.27586206896551724, 1: 0.25862068965517243, 0: 0.2413793103448276, 3: 0.22413793103448276}, {3: 0.29310344827586204, 1: 0.29310344827586204, 2: 0.22413793103448276, 0: 0.1896551724137931}, {1: 0.3620689655172414, 3: 0.27586206896551724, 0: 0.20689655172413793, 2: 0.15517241379310345}, {0: 0.29310344827586204, 3: 0.27586206896551724, 1: 0.22413793103448276, 2: 0.20689655172413793}, {0: 0.29310344827586204, 1: 0.27586206896551724, 3: 0.2413793103448276, 2: 0.1896551724137931}, {2: 0.3448275862068966, 1: 0.27586206896551724, 0: 0.2413793103448276, 3: 0.13793103448275862}, {0: 0.5172413793103449, 2: 0.25862068965517243, 1: 0.15517241379310345, 3: 0.06896551724137931}, {0: 0.5, 1: 0.1896551724137931, 3: 0.1724137931034483, 2: 0.13793103448275862}]
data2 = [{2: 0.686, 3: 0.255, 0: 0.0581, 1: 0}, {1: 0.406, 0: 0.313, 2: 0.174, 3: 0.104}, {0: 0.383, 2: 0.3372093023255814, 3: 0.22093023255813954, 1: 0.05813953488372093}, {3: 0.38372093023255816, 1: 0.29069767441860467, 2: 0.20930232558139536, 0: 0.11627906976744186}, {0: 0.32558139534883723, 2: 0.26744186046511625, 1: 0.23255813953488372, 3: 0.1744186046511628}, {1: 0.38372093023255816, 3: 0.22093023255813954, 2: 0.20930232558139536, 0: 0.18604651162790697}, {3: 0.313953488372093, 1: 0.27906976744186046, 2: 0.23255813953488372, 0: 0.1744186046511628}, {3: 0.3372093023255814, 0: 0.2441860465116279, 2: 0.2441860465116279, 1: 0.1744186046511628}, {1: 0.37209302325581395, 0: 0.3023255813953488, 3: 0.1744186046511628, 2: 0.1511627906976744}, {2: 0.4186046511627907, 1: 0.29069767441860467, 0: 0.20930232558139536, 3: 0.08139534883720931}, {0: 0.4883720930232558, 1: 0.23255813953488372, 2: 0.20930232558139536, 3: 0.06976744186046512}, {0: 0.4418604651162791, 1: 0.3023255813953488, 3: 0.12790697674418605, 2: 0.12790697674418605}]

# data1 = [{2: 0.5172413793103449, 1: 0.4827586206896552, 0: 0, 3: 0}, {0: 0.5172413793103449, 1: 0.4827586206896552, 2: 0, 3: 0}, {2: 0.5172413793103449, 0: 0.4827586206896552, 1: 0, 3: 0}, {0: 0.5172413793103449, 2: 0.4827586206896552, 1: 0, 3: 0}, {3: 0.5172413793103449, 1: 0.4827586206896552, 0: 0, 2: 0}, {2: 0.5172413793103449, 3: 0.4827586206896552, 0: 0, 1: 0}, {2: 0.5172413793103449, 3: 0.4827586206896552, 0: 0, 1: 0}, {2: 0.5172413793103449, 0: 0.4827586206896552, 1: 0, 3: 0}, {2: 0.5172413793103449, 1: 0.4827586206896552, 0: 0, 3: 0}, {2: 0.5172413793103449, 3: 0.4827586206896552, 0: 0, 1: 0}, {1: 0.4827586206896552, 0: 0.4827586206896552, 2: 0.034482758620689655, 3: 0}, {0: 0.4827586206896552, 3: 0.46551724137931033, 2: 0.05172413793103448, 1: 0}]
# data2 = [{1: 0.6511627906976745, 2: 0.3488372093023256, 0: 0, 3: 0},  {1: 0.6511627906976745, 0: 0.3488372093023256, 2: 0, 3: 0},  {0: 0.6511627906976745, 2: 0.3488372093023256, 1: 0, 3: 0},  {2: 0.6511627906976745, 0: 0.3488372093023256, 1: 0, 3: 0},  {1: 0.6511627906976745, 3: 0.3488372093023256, 0: 0, 2: 0},  {3: 0.6511627906976745, 2: 0.3488372093023256, 0: 0, 1: 0},  {3: 0.6511627906976745, 2: 0.3488372093023256, 0: 0, 1: 0},  {0: 0.6511627906976745, 2: 0.3488372093023256, 1: 0, 3: 0},  {1: 0.6511627906976745, 2: 0.3488372093023256, 0: 0, 3: 0},  {3: 0.6511627906976745, 2: 0.3488372093023256, 0: 0, 1: 0},  {0: 0.6511627906976745, 1: 0.32558139534883723, 2: 0.023255813953488372, 3: 0},  {0: 0.6511627906976745, 3: 0.313953488372093, 2: 0.03488372093023256, 1: 0}]

data1 = sorted_data = [dict(sorted(d.items())) for d in data1]
data2 = sorted_data = [dict(sorted(d.items())) for d in data2]

merged_data = data1 + data2

# 转换数据为DataFrame
df = pd.DataFrame(merged_data)


# 创建子图
fig, axs = plt.subplots(1, 2, figsize=(10, 8) ,sharey=True)

# 绘制第一个子图
sns.heatmap(df.iloc[:12, :], annot=True, cmap="YlGnBu", fmt=".3f", linewidths=.5, cbar=False, ax=axs[0])
axs[0].set_title('Sichuan', fontdict={'fontsize': 20, 'fontweight': 'bold'})
axs[0].set_xlabel('Experts', fontdict={'fontsize': 16, 'fontweight': 'bold'})
axs[0].set_ylabel('Layers', fontdict={'fontsize': 16, 'fontweight': 'bold'})
axs[0].set_yticklabels(range(1, 13))

# 绘制第二个子图
sns.heatmap(df.iloc[12:, :], annot=True, cmap="YlGnBu", fmt=".3f", linewidths=.5,cbar=False, ax=axs[1])
axs[1].set_title('Kunming', fontdict={'fontsize': 20, 'fontweight': 'bold'})
axs[1].set_xlabel('Experts', fontdict={'fontsize': 16, 'fontweight': 'bold'})
axs[1].set_ylabel('Layers', fontdict={'fontsize': 16, 'fontweight': 'bold'})
axs[0].set_yticklabels(range(1, 13))

# 调整子图布局
plt.tight_layout()

# 显示图形
plt.show()